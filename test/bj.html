<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rulett Minij√°t√©k</title>
    
    <link rel="stylesheet" href="../index.css">
    
    <style>
        /* CSS V√ÅLTOZ√ìK REPLIK√ÅL√ÅSA A K√ñNNYEBB ST√çLUSHOZ */
        :root {
            --primary-dark: #1a5276;
            --primary: #2c7cba;
            --primary-light: #3498db;
            --secondary: #1abc9c;
            --accent: #e74c3c;
            --dark-bg: #2c3e50;
            --card-bg: #34495e;
            --card-border: #4a6278;
            --text-light: #ffffff;
            --text-muted: #ecf0f1;
            --footer-bg: #1a252f;
            --highlight: #a3e4d7;
            --price-green: #5ef19b;
            --red-roulette: #cc0000;
            --black-roulette: #111111;
            --green-roulette: #008000;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background-color: var(--dark-bg);
            color: var(--text-light);
            font-family: 'Montserrat', Arial, sans-serif;
            padding: 20px;
        }

        .game-container {
            width: 95%;
            max-width: 900px;
            padding: 30px;
            border: 5px solid var(--secondary);
            border-radius: 12px;
            background-color: var(--card-bg); /* S√∂t√©t asztal h√°tt√©r */
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
        }

        /* --- FELS≈ê INFORM√ÅCI√ìK √âS VEZ√âRL√âS --- */
        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--card-border);
        }

        #balance, #result {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--highlight);
        }

        #result {
            color: var(--secondary);
        }

        /* --- ZSETON V√ÅLASZT√ÅS --- */
        .chip-selection {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .chip {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            border: 3px solid transparent;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.4);
            transition: all 0.2s;
        }
        
        /* Zseton sz√≠nek a weboldal st√≠lus√°hoz igaz√≠tva */
        .chip[data-value="1"] { background-color: var(--primary-light); }
        .chip[data-value="5"] { background-color: var(--secondary); }
        .chip[data-value="25"] { background-color: var(--accent); }
        .chip[data-value="100"] { background-color: var(--price-green); }

        .chip.active {
            border-color: var(--text-light);
            transform: scale(1.1);
        }

        /* --- RUETT ASZTAL (GRiD) --- */
        .roulette-table {
            display: grid;
            grid-template-columns: 1fr repeat(3, 1fr); /* 0 + 3 oszlop */
            gap: 5px;
            margin: 0 auto 30px;
            border: 2px solid var(--secondary);
            border-radius: 5px;
            background-color: var(--primary-dark);
        }

        .cell {
            padding: 15px 0;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.1s;
            position: relative;
            border: 1px solid var(--card-border);
        }
        
        .cell:hover {
            opacity: 0.8;
        }

        /* 0 Cella */
        .zero-cell {
            grid-row: 1 / span 12;
            background-color: var(--green-roulette);
        }

        /* 1-36 Sz√°mok */
        .number-cell {
            color: var(--text-light);
        }
        .red { background-color: var(--red-roulette); }
        .black { background-color: var(--black-roulette); }

        /* K√ºl√∂nleges mez≈ëk (Red/Black, Even/Odd) */
        .outside-cell {
            grid-column: 2 / span 3;
        }
        .outside-cell.red { background-color: var(--red-roulette); }
        .outside-cell.black { background-color: var(--black-roulette); }
        .outside-cell.even { background-color: var(--black-roulette); }
        .outside-cell.odd { background-color: var(--black-roulette); }
        
        /* T√©t jelz√©se a cell√°n */
        .bet-amount {
            position: absolute;
            top: 0;
            right: 0;
            background-color: var(--secondary);
            color: var(--dark-bg);
            padding: 2px 5px;
            border-bottom-left-radius: 5px;
            font-size: 0.7em;
        }

        /* --- M≈∞VELETI GOMBOK --- */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .action-buttons button {
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 700;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: var(--text-light);
            transition: all 0.3s;
        }

        #spin-btn {
            background-color: var(--secondary); /* Spin (P√∂rget√©s) - F≈ë akci√≥ */
        }
        #spin-btn:disabled {
            background-color: var(--card-border);
        }
        
        #clear-btn {
            background-color: var(--accent); /* Clear (T√∂rl√©s) - Vesz√©ly */
        }
        #clear-btn:disabled {
            background-color: var(--card-border);
        }

        .action-buttons button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);
        }
        
        /* Anim√°ci√≥ a nyertes cell√°n */
        .winner {
            animation: pulse-win 1s 5;
        }

        @keyframes pulse-win {
            0% { box-shadow: 0 0 10px 5px var(--secondary); }
            50% { box-shadow: 0 0 20px 10px var(--highlight); }
            100% { box-shadow: 0 0 10px 5px var(--secondary); }
        }

    </style>
</head>
<body>

<div class="game-container">
    <h1>üî¥‚ö´Ô∏è Rulett Asztal üü¢</h1>

    <div class="header-controls">
        <div>
            Egyenleg: <span id="balance">$5000</span>
        </div>
        <div id="result">
            K√©sz! Tegy√©l t√©tet!
        </div>
    </div>
    
    <div class="chip-selection">
        <div class="chip active" data-value="1" onclick="selectChip(1)">$1</div>
        <div class="chip" data-value="5" onclick="selectChip(5)">$5</div>
        <div class="chip" data-value="25" onclick="selectChip(25)">$25</div>
        <div class="chip" data-value="100" onclick="selectChip(100)">$100</div>
    </div>

    <div class="roulette-table">
        <div id="cell-0" class="cell zero-cell" onclick="placeBet('0')">
            0
            <span class="bet-amount" data-bet-id="0"></span>
        </div>

        <script>
            // Seg√©df√ºggv√©ny a rulett sz√≠nekhez
            const colors = {
                1: 'red', 2: 'black', 3: 'red', 4: 'black', 5: 'red', 6: 'black',
                7: 'red', 8: 'black', 9: 'red', 10: 'black', 11: 'black', 12: 'red',
                13: 'black', 14: 'red', 15: 'black', 16: 'red', 17: 'black', 18: 'red',
                19: 'red', 20: 'black', 21: 'red', 22: 'black', 23: 'red', 24: 'black',
                25: 'red', 26: 'black', 27: 'red', 28: 'black', 29: 'black', 30: 'red',
                31: 'black', 32: 'red', 33: 'black', 34: 'red', 35: 'black', 36: 'red'
            };
            
            // T√°bla gener√°l√°sa
            for (let i = 1; i <= 36; i++) {
                const colorClass = colors[i];
                const row = (i - 1) % 3; // 0, 1, 2
                const gridRow = 12 - Math.floor((i - 1) / 3); // Kezd≈ë sor, alulr√≥l felfel√©
                const gridColumn = 4 - row; // Oszlop (2, 3, 4)
                
                document.write(`
                    <div id="cell-${i}" class="cell number-cell ${colorClass}" 
                         style="grid-row: ${gridRow}; grid-column: ${gridColumn};" 
                         onclick="placeBet('${i}')">
                        ${i}
                        <span class="bet-amount" data-bet-id="${i}"></span>
                    </div>
                `);
            }
        </script>

        <div id="cell-red" class="cell outside-cell red" style="grid-row: 13; grid-column: 2;" onclick="placeBet('red')">
            RED
            <span class="bet-amount" data-bet-id="red"></span>
        </div>
        <div id="cell-black" class="cell outside-cell black" style="grid-row: 13; grid-column: 3;" onclick="placeBet('black')">
            BLACK
            <span class="bet-amount" data-bet-id="black"></span>
        </div>
        <div id="cell-even" class="cell outside-cell even" style="grid-row: 14; grid-column: 2;" onclick="placeBet('even')">
            EVEN
            <span class="bet-amount" data-bet-id="even"></span>
        </div>
        <div id="cell-odd" class="cell outside-cell odd" style="grid-row: 14; grid-column: 3;" onclick="placeBet('odd')">
            ODD
            <span class="bet-amount" data-bet-id="odd"></span>
        </div>
        
    </div>

    <div class="action-buttons">
        <button id="spin-btn" onclick="spin()" disabled>P√∂rget√©s (0 $)</button>
        <button id="clear-btn" onclick="clearBets()" disabled>T√©tek T√∂rl√©se</button>
    </div>
</div>

<script>
    // --- J√ÅT√âK √ÅLLAPOT V√ÅLTOZ√ìK ---
    let balance = 5000;
    let currentBet = {}; // { 'cell-id': amount }
    let selectedChipValue = 1;

    // --- DOM ELEMEK ---
    const balanceDisplay = document.getElementById('balance');
    const resultDisplay = document.getElementById('result');
    const chipElements = document.querySelectorAll('.chip');
    const spinBtn = document.getElementById('spin-btn');
    const clearBtn = document.getElementById('clear-btn');
    const betAmountSpans = document.querySelectorAll('.bet-amount');

    // Rulett sz√≠nek (sz√ºks√©ges a kifizet√©sekhez)
    const ROULETTE_COLORS = {
        0: 'green', 1: 'red', 2: 'black', 3: 'red', 4: 'black', 5: 'red', 6: 'black',
        7: 'red', 8: 'black', 9: 'red', 10: 'black', 11: 'black', 12: 'red',
        13: 'black', 14: 'red', 15: 'black', 16: 'red', 17: 'black', 18: 'red',
        19: 'red', 20: 'black', 21: 'red', 22: 'black', 23: 'red', 24: 'black',
        25: 'red', 26: 'black', 27: 'red', 28: 'black', 29: 'black', 30: 'red',
        31: 'black', 32: 'red', 33: 'black', 34: 'red', 35: 'black', 36: 'red'
    };

    // --- FUNKCI√ìK ---

    /**
     * Friss√≠ti a kijelz≈ët
     */
    function updateDisplay() {
        balanceDisplay.textContent = `$${balance}`;
        let totalBet = 0;
        
        // √ñsszes t√©t friss√≠t√©se √©s t√©tek megjelen√≠t√©se a cell√°kon
        betAmountSpans.forEach(span => {
            const betId = span.dataset.betId;
            const betAmount = currentBet[betId] || 0;
            totalBet += betAmount;
            span.textContent = betAmount > 0 ? `$${betAmount}` : '';
            // Elrejtj√ºk, ha nincs t√©t
            span.style.display = betAmount > 0 ? 'block' : 'none';

            // Kiemelj√ºk a t√©telt cell√°t
            const cellElement = document.getElementById(`cell-${betId}`);
            if (cellElement) {
                cellElement.style.border = betAmount > 0 ? `3px solid var(--secondary)` : `1px solid var(--card-border)`;
            }
        });

        spinBtn.textContent = `P√∂rget√©s (${totalBet} $)`;
        spinBtn.disabled = totalBet === 0 || balance === 0;
        clearBtn.disabled = totalBet === 0;
    }

    /**
     * Zseton v√°laszt√°sa
     */
    function selectChip(value) {
        selectedChipValue = value;
        chipElements.forEach(chip => {
            chip.classList.remove('active');
            if (parseInt(chip.dataset.value) === value) {
                chip.classList.add('active');
            }
        });
    }

    /**
     * T√©t elhelyez√©se
     */
    function placeBet(cellId) {
        if (balance < selectedChipValue) {
            resultDisplay.textContent = "Nincs elegend≈ë p√©nz a t√©telhez!";
            return;
        }

        // T√©t elhelyez√©se (hozz√°adja a m√°r megl√©v≈ëh√∂z)
        currentBet[cellId] = (currentBet[cellId] || 0) + selectedChipValue;
        
        // Levon√°s az egyenlegb≈ël p√∂rget√©skor t√∂rt√©nik, itt csak ellen≈ërizz√ºk a limitemet
        
        resultDisplay.textContent = `${cellId} t√©t: +$${selectedChipValue}.`;
        updateDisplay();
    }
    
    /**
     * T√©tek t√∂rl√©se
     */
    function clearBets() {
        // Visszaadjuk a p√©nzt az egyenlegbe, mivel p√∂rget√©s el≈ëtt tett√ºk r√°
        let totalBet = 0;
        for (const bet in currentBet) {
            totalBet += currentBet[bet];
        }
        balance += totalBet; // Visszaadjuk a kor√°bbi t√©teket
        
        currentBet = {}; // T√©tek t√∂rl√©se
        resultDisplay.textContent = `√ñsszesen ${totalBet} $ t√©t t√∂r√∂lve.`;
        
        // T√°bla kijel√∂l√©sek t√∂rl√©se
        document.querySelectorAll('.cell').forEach(cell => {
            cell.classList.remove('winner');
        });

        updateDisplay();
    }

    /**
     * Nyertes sz√°m √©s kifizet√©s kisz√°m√≠t√°sa
     */
    function calculateWinnings(winningNumber) {
        let totalWinnings = 0;
        const winningNumberStr = winningNumber.toString();
        const winningColor = ROULETTE_COLORS[winningNumber];
        const isEven = winningNumber !== 0 && winningNumber % 2 === 0;

        // Elt√°vol√≠tja az el≈ëz≈ë nyertes kiemel√©st
        document.querySelectorAll('.cell').forEach(cell => {
            cell.classList.remove('winner');
        });
        
        // Elt√°vol√≠tja az el≈ëz≈ë t√©tek √∂ssz√©t√©t√©t az egyenlegb≈ël
        let totalBet = 0;
        for (const bet in currentBet) {
            totalBet += currentBet[bet];
        }
        balance -= totalBet; // Levonjuk a p√∂rget√©s el≈ëtt megtett t√©teket

        // --- KIFIZET√âS ELLEN≈êRZ√âSE ---
        for (const bet in currentBet) {
            const betAmount = currentBet[bet];
            let payout = 0;

            // 1. Straight Up (Egyedi sz√°m) - 35:1
            if (bet === winningNumberStr) {
                payout = betAmount * 35;
                totalWinnings += payout + betAmount; // Visszafizeti a t√©tet is
            } 
            // 2. Sz√≠n (Red/Black) - 1:1
            else if (bet === 'red' && winningColor === 'red') {
                payout = betAmount;
                totalWinnings += payout + betAmount;
            } else if (bet === 'black' && winningColor === 'black') {
                payout = betAmount;
                totalWinnings += payout + betAmount;
            }
            // 3. P√°ros/P√°ratlan (Even/Odd) - 1:1
            else if (bet === 'even' && isEven) {
                payout = betAmount;
                totalWinnings += payout + betAmount;
            } else if (bet === 'odd' && !isEven && winningNumber !== 0) {
                payout = betAmount;
                totalWinnings += payout + betAmount;
            }
            // A 0-ra tett t√©t (ha lenne) m√°r az Straight Up ellen≈ërz√©sn√©l megt√∂rt√©nik.
        }

        // Nyertes sz√°m kiemel√©se
        const winnerCell = document.getElementById(`cell-${winningNumberStr}`);
        if (winnerCell) {
            winnerCell.classList.add('winner');
        }

        return totalWinnings;
    }

    /**
     * P√∂rget√©s ind√≠t√°sa
     */
    function spin() {
        if (Object.keys(currentBet).length === 0) {
            resultDisplay.textContent = "Tegy√©l t√©tet a p√∂rget√©s el≈ëtt!";
            return;
        }
        
        // Gombok letilt√°sa p√∂rget√©s alatt
        spinBtn.disabled = true;
        clearBtn.disabled = true;
        
        resultDisplay.textContent = "A ker√©k forog...";

        // Szimul√°lt p√∂rget√©s: 0 √©s 36 k√∂z√∂tti v√©letlen sz√°m
        const winningNumber = Math.floor(Math.random() * 37); // 0-36

        // Szimul√°lt anim√°ci√≥ (egyszer≈± setTimeout)
        setTimeout(() => {
            const winnings = calculateWinnings(winningNumber);
            balance += winnings;

            const profit = winnings - (Object.keys(currentBet).reduce((sum, key) => sum + currentBet[key], 0));
            
            let message = `üî¥ Nyertes sz√°m: **${winningNumber}** (${ROULETTE_COLORS[winningNumber].toUpperCase()})! `;
            if (winnings > 0) {
                 message += `**NYERT√âL** $${profit} profitot! (√ñsszesen: $${winnings})`;
            } else {
                 message += `Vesz√≠tett√©l. Pr√≥b√°lj √∫jra!`;
            }

            resultDisplay.innerHTML = message;
            currentBet = {}; // T√©tek t√∂rl√©se a k√∂vetkez≈ë k√∂rre

            updateDisplay();
        }, 1500); // 1.5 m√°sodperces szimul√°lt p√∂rget√©si id≈ë
    }

    // --- KEZDETI √ÅLLAPOT ---
    updateDisplay();
    selectChip(1); // Kezd≈ë zseton $1

</script>

</body>
</html>
